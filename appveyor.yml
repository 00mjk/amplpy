environment:
  TWINE_USERNAME: fdabrandao
  # Note: TWINE_PASSWORD is set in Appveyor settings
build_script:
  - python updatelib.py
  - pip install cibuildwheel==0.4.0
  - cibuildwheel --output-dir wheelhouse
artifacts:
  - path: "wheelhouse\\*.whl"
    name: Wheels
on_success:
  - ps: >-
      if ($env:APPVEYOR_REPO_TAG -eq "true") {
        python -m pip install twine
        python -m twine upload (resolve-path wheelhouse\*.whl) 2> $null
      } else {
        python -m pip install twine
        python -m twine upload (resolve-path wheelhouse\*.whl) 2> $null
      }
